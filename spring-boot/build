mkdir dist

# copy the spring boot project to the distribution folder
cp ~/code/spring-boot-sample/build/libs/spring-boot-docker-0.1.0.jar dist/

# dynamically create a script file in the distribution folder.
# this will be the command used in the docker file
cat << EOF > dist/springboot.sh
#!/bin/bash

if [ -f /opt/environment ]; then
	echo "found environment file"
   source /opt/environment
fi

java -jar spring-boot-docker-0.1.0.jar
EOF

# build the docker image
docker build -t gs-spring-boot .
rm -fr dist
